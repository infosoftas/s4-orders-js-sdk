<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infosoft</title>
    <base href="/" />
</head>

<body>
    <div id="root"></div>
    <script type="module">
        import { orderComponent } from './script.js';
        const config = {
            modulaTitle: 'MyCompany',
            domElementId: 'order',
            userId: '9816b3c5-ec3c-4c2c-b709-83b669e114f1',
            identityProviderId: 'a247d6e7-59eb-4f30-a03a-a0d83ada5211',
            templatePackageId: 'fefddfeb-e2de-4eaf-abfe-03297591a2d6',
            subscriberId: '25b56197-91a5-4796-9288-6b35877f1f88',
            tenantId: 'd5e00e27-0cdf-4753-b9a8-40e289d1bf5b',
            organizationId: 'abf90cef-661f-4a85-940b-001eafb587e3',
            showIframe: true,
            redirectUrl: 'https://localhost:3000/',
            availablePaymentMethods: [
                { label: "Vipps", value: "Vipps" },
                { label: "MobilePay", value: "MobilePay" },
                { label: "Credit Card/Debit Card", value: "SwedbankPay" }
            ],
            merchantAgreementUrl:
                'https://service.info-subscription.com/agreement',
            paymentMethodsOptions: {
                Vipps: {
                    generateSubscriberContact: true,
                },
                SwedbankPay: {
                    orderFormFields: [{
                        name: 'name',
                        required: false,
                    }, {
                        name: 'email',
                        required: true,
                    }]
                }
            },
            settings: {
                successText: 'Order successful completed!',
                failureText: 'Something went wrong!',
                orderDefaultValues: {
                    name: 'Test',
                    email: 'test@test.com',
                    phoneNumber: '48059459'
                }
            }
        };

        let timer = setInterval(() => {
            let orderElement = document.getElementById('order');
            if (!orderElement) return;
            orderComponent?.remove();
            orderComponent.init(config);
            console.log('module init');
            clearInterval(timer);
        }, 300);
    </script>
</body>

</html>